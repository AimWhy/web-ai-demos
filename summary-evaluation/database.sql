/**
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */

CREATE TABLE IF NOT EXISTS ARTICLE (
    ID TEXT NOT NULL PRIMARY KEY,
    SOURCE TEXT NOT NULL,
    SOURCE_ID TEXT NOT NULL,
    TEXT TEXT NOT NULL,
    UNIQUE(SOURCE, SOURCE_ID)
);

CREATE TABLE IF NOT EXISTS SUMMARY (
    ID TEXT NOT NULL PRIMARY KEY,
    MODEL TEXT NOT NULL,
    ARTICLE_ID TEXT NOT NULL,
    TEXT TEXT NOT NULL,
    FOREIGN KEY(ARTICLE_ID) REFERENCES article(ID)
    UNIQUE(MODEL, ARTICLE_ID)
);

CREATE TABLE IF NOT EXISTS ALIGNMENT_VERDICT (
    SUMMARY_ID TEXT NOT NULL,
    SEQUENCE INT NOT NULL,
    STATEMENT TEXT NOT NULL,
    VERDICT TEXT NOT NULL,
    REASON TEXT,
    PRIMARY KEY(SUMMARY_ID, SEQUENCE)
    FOREIGN KEY(SUMMARY_ID) REFERENCES SUMMARY_ID(ID)
);
